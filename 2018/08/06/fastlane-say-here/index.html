<!DOCTYPE html><html><head><meta charset="utf-8"><title>ä½¿ç”¨ fastlane è¿›è¡Œ iOS æ‰“åŒ… | ç…œå¯’äº†</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="fastlane æ˜¯ä¸€ä¸ªé€šè¿‡ç®€å•å‘½ä»¤æ¥å®Œæˆè¯¸å¦‚æˆªå›¾ã€è·å–è¯ä¹¦ã€ç¼–è¯‘ã€å¯¼å‡ºå®‰è£…åŒ…ã€æäº¤ iTunesConnect ç­‰ä¸€ç³»åˆ—æ“ä½œçš„å·¥å…·ï¼Œå®ƒåŒæ—¶æ”¯æŒ iOS å’Œ Androidã€‚"><meta name="keywords" content="fastlane"><meta property="og:type" content="article"><meta property="og:title" content="ä½¿ç”¨ fastlane è¿›è¡Œ iOS æ‰“åŒ…"><meta property="og:url" content="https://blog.yuhanle.com/2018/08/06/fastlane-say-here/index.html"><meta property="og:site_name" content="ç…œå¯’äº†"><meta property="og:description" content="fastlane æ˜¯ä¸€ä¸ªé€šè¿‡ç®€å•å‘½ä»¤æ¥å®Œæˆè¯¸å¦‚æˆªå›¾ã€è·å–è¯ä¹¦ã€ç¼–è¯‘ã€å¯¼å‡ºå®‰è£…åŒ…ã€æäº¤ iTunesConnect ç­‰ä¸€ç³»åˆ—æ“ä½œçš„å·¥å…·ï¼Œå®ƒåŒæ—¶æ”¯æŒ iOS å’Œ Androidã€‚"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://docs.fastlane.tools/img/fastlane_text.png"><meta property="og:image" content="http://7xqhcq.com1.z0.glb.clouddn.com/fastlane/2017-12-21-fastlane01.png"><meta property="og:image" content="http://7xqhcq.com1.z0.glb.clouddn.com/fastlane/QQ20180807-133643@2x.png"><meta property="og:image" content="http://7xqhcq.com1.z0.glb.clouddn.com/fastlane/QQ20180807-142523@2x.png"><meta property="og:image" content="http://7xqhcq.com1.z0.glb.clouddn.com/fastlane/submission_information.png"><meta property="og:updated_time" content="2018-09-06T06:27:29.035Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="ä½¿ç”¨ fastlane è¿›è¡Œ iOS æ‰“åŒ…"><meta name="twitter:description" content="fastlane æ˜¯ä¸€ä¸ªé€šè¿‡ç®€å•å‘½ä»¤æ¥å®Œæˆè¯¸å¦‚æˆªå›¾ã€è·å–è¯ä¹¦ã€ç¼–è¯‘ã€å¯¼å‡ºå®‰è£…åŒ…ã€æäº¤ iTunesConnect ç­‰ä¸€ç³»åˆ—æ“ä½œçš„å·¥å…·ï¼Œå®ƒåŒæ—¶æ”¯æŒ iOS å’Œ Androidã€‚"><meta name="twitter:image" content="https://docs.fastlane.tools/img/fastlane_text.png"><meta name="twitter:creator" content="@yuhanle"><link rel="alternative" href="/atom.xml" title="ç…œå¯’äº†" type="application/atom+xml"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/style.css"><!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]--><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?617e86ba9ca3477b2a31c11f6214f4f8";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></head><body><div id="container"><div id="wrap"><header id="header"><div id="banner"></div><div id="header-outer" class="outer"><div id="header-title" class="inner"><h1 id="logo-wrap"> <a href="/" id="logo">ç…œå¯’äº†</a></h1><h2 id="subtitle-wrap"> <a href="/" id="subtitle">ç”Ÿæ´»å°±æ˜¯ä¸æ–­è°ƒè¯•çš„è¿‡ç¨‹</a></h2></div><div id="header-inner" class="inner"><nav id="main-nav"><a id="main-nav-toggle" class="nav-icon"></a> <a class="main-nav-link" href="/">ä¸»é¡µ</a> <a class="main-nav-link" href="/archives">å½’æ¡£</a> <a class="main-nav-link" href="/books">ä¹¦å•</a> <a class="main-nav-link" href="https://trello.com/b/Dy1OldrS/yuhanles-time">è¡Œç¨‹</a> <a class="main-nav-link" href="/links">å‹é“¾</a> <a class="main-nav-link" href="/about">å…³äº</a></nav><nav id="sub-nav"><a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a><a id="nav-search-btn" class="nav-icon" title="Search"></a></nav><div id="search-form-wrap"><form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form"> <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search"> <input type="submit" value="" class="search-form-submit"> <input name="tn" type="hidden" value="bds"> <input name="cl" type="hidden" value="3"> <input name="ct" type="hidden" value="2097152"> <input type="hidden" name="si" value="blog.yuhanle.com"></form></div></div></div></header><div class="outer"><section id="main"><article id="post-fastlane-say-here" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"> <a href="/2018/08/06/fastlane-say-here/" class="article-date"><time datetime="2018-08-06T01:00:00.000Z" itemprop="datePublished">2018-08-06</time></a><div class="article-category"> <a class="article-category-link" href="/categories/fastlane/">fastlane</a></div></div><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name"> ä½¿ç”¨ fastlane è¿›è¡Œ iOS æ‰“åŒ…</h1></header><div class="article-entry" itemprop="articleBody"><p><img src="https://docs.fastlane.tools/img/fastlane_text.png" alt=""></p><p><a href="https://fastlane.tools/" target="_blank" rel="noopener">fastlane</a> æ˜¯ä¸€ä¸ªé€šè¿‡ç®€å•å‘½ä»¤æ¥å®Œæˆè¯¸å¦‚æˆªå›¾ã€è·å–è¯ä¹¦ã€ç¼–è¯‘ã€å¯¼å‡ºå®‰è£…åŒ…ã€æäº¤ iTunesConnect ç­‰ä¸€ç³»åˆ—æ“ä½œçš„å·¥å…·ï¼Œå®ƒåŒæ—¶æ”¯æŒ iOS å’Œ Androidã€‚</p><a id="more"></a><table><thead><tr><th style="text-align:center"></th><th>fastlane</th></tr></thead><tbody><tr><td style="text-align:center">ğŸš€</td><td>Save <strong>hours</strong> every time you push a new release to the store or beta testing service</td></tr><tr><td style="text-align:center">âœ¨</td><td>Integrates with all your existing tools and services (170 actions currently)</td></tr><tr><td style="text-align:center">ğŸ“–</td><td>100% open source under the MIT license</td></tr><tr><td style="text-align:center">ğŸ©</td><td>Easy setup assistant to get started in a few minutes</td></tr><tr><td style="text-align:center">âš’</td><td>Runs on <strong>your</strong> machine, itâ€™s your app and your data</td></tr><tr><td style="text-align:center">ğŸ‘»</td><td>Integrates with all major CI systems</td></tr><tr><td style="text-align:center">ğŸ–¥</td><td>Supports iOS, Mac, and Android apps</td></tr><tr><td style="text-align:center">ğŸ”§</td><td>Extend and customise <em>fastlane</em> to fit your needs, youâ€™re not dependent on anyone</td></tr><tr><td style="text-align:center">ğŸ’­</td><td>Never remember any commands any more, just <em>fastlane</em></td></tr><tr><td style="text-align:center">ğŸš¢</td><td>Deploy from any computer, including a CI server</td></tr></tbody></table><p>ä½ èƒ½å¤Ÿé€šè¿‡ç®€å•çš„æ–¹å¼é…ç½®æµç¨‹è¿›è¡Œçš„é¡ºåºï¼Œå¹¶é€šè¿‡éå¸¸ç®€å•çš„å‘½ä»¤æ‰§è¡Œå…¶ä¸­çš„ä¸€ä¸ªæµç¨‹ã€‚å½“ç„¶å®ƒçš„ç®€å•å¹¶ä¸ä»£è¡¨åŠŸèƒ½ä¹Ÿç®€é™‹ï¼Œæœ‰å¼€æºç¤¾åŒºçš„æ”¯æŒï¼Œæ›´æ–°è¿…é€Ÿä¸”æœ‰å¾ˆå¤šåŠŸèƒ½èƒ½å¤Ÿæ»¡è¶³ä½ çš„éœ€æ±‚ã€‚</p><p><img src="http://7xqhcq.com1.z0.glb.clouddn.com/fastlane/2017-12-21-fastlane01.png" alt=""></p><h2 id="ä¸ºä»€ä¹ˆä½¿ç”¨å®ƒ"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨å®ƒ" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨å®ƒ"></a>ä¸ºä»€ä¹ˆä½¿ç”¨å®ƒ</h2><p>ä½œä¸ºå…¬å¸çš„ iOS ç¨‹åºå‘˜ï¼Œå°‘ä¸äº†åœ¨å‘å¸ƒåº”ç”¨çš„æ—¶å€™å„ç§ç­‰å¾…ã€‚æ ‡å‡†çš„æ‰‹åŠ¨å‘å¸ƒæµç¨‹æ˜¯ï¼šç¼–è¯‘-&gt;æ‰“åŒ…ä¸Šä¼ -&gt;å¡«å†™åº”ç”¨æ›´æ–°æ•°æ®-&gt;ç­‰å¾… iTunesConnect ç¼–è¯‘-&gt;é€‰æ‹©ç‰ˆæœ¬å‘å¸ƒï¼Œæ•´ä¸ªè¿‡ç¨‹å¤§æ¦‚éœ€è¦ 30 åˆ†é’Ÿå·¦å³ã€‚å…³é”®æ˜¯è¿™ä¸ªè¿‡ç¨‹å°±åƒwindows è£…ç³»ç»Ÿä¸€æ ·ï¼Œè™½ç„¶æ‰‹åŠ¨å‚ä¸çš„ä¸å¤šï¼Œä½†æ˜¯è¦ä¸€ç›´å®ˆåœ¨ç”µè„‘å‰ç­‰ç€ã€‚</p><p>åˆšå¼€å§‹ç”¨ fastlaneï¼Œå‘ç°å…¶ä½¿ç”¨å’Œé…ç½®è¿˜ç®—ç®€å•ï¼Œæœ‰å¼€æºç¤¾åŒºæ”¯æŒï¼Œæ›´æ–°è¿…é€ŸåŠŸèƒ½å¼ºå¤§ã€‚ä¸”ç›¸æ¯” jenkins é‡Œçš„æ’ä»¶ï¼Œfastlane å¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥è¢«<strong><a href="https://docs.fastlane.tools/best-practices/continuous-integration/" target="_blank" rel="noopener">å¤šç§CI</a></strong> æ¥å…¥ã€‚</p><p>ç¨‹åºå‘˜è¿™ä¹ˆæ‡’ï¼Œä¸€å®šä¼šæƒ³åŠæ³•è®©ä»–è‡ªåŠ¨åŒ–çš„ã€‚åæ¥å‘ç°ç‰¹åˆ«æ‡’çš„ <a href="https://github.com/KrauseFx" target="_blank" rel="noopener">Felix Krause</a> å†™çš„ <a href="https://docs.fastlane.tools/" target="_blank" rel="noopener">Fastlane</a>ï¼ŒFastlaneå¯ä»¥éå¸¸å¿«é€Ÿç®€å•çš„æ­å»ºä¸€ä¸ªè‡ªåŠ¨åŒ–å‘å¸ƒæœåŠ¡ï¼Œå¹¶ä¸”æ”¯æŒ <code>Android</code>ï¼Œ<code>iOS</code>ï¼Œ<code>MacOS</code>ã€‚ä»–å¯ä»¥å®ç°ä¸€æ¡å‘½ä»¤ä»<strong>ç¼–è¯‘</strong>åˆ°<strong>é€‰ç‰ˆå‘å¸ƒ</strong>å…¨ç¨‹ä¸ç”¨å¹²é¢„ã€‚ä½œä¸ºç¨‹åºå‘˜çš„ä½ åªè¦ä¸€æ¡å‘½ä»¤ï¼Œçœ‹é›†ç¾å‰§ï¼Œå‘å¸ƒå°±å®Œæˆäº†ã€‚æˆªæ­¢åˆšåˆš Fastlane å®˜ç½‘ä¸Šå®£ç§°å·²ç»ä¸ºç¨‹åºå‘˜èŠ‚çœäº†<strong>13,746,550å°æ—¶+</strong>ã€‚</p><h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h2><ul><li>æäº¤æ—¶æ‰§è¡Œæµ‹è¯•ï¼ˆåŒ…æ‹¬å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼‰ï¼›</li><li>æ„å»ºå¹¶åˆ†å‘å†…éƒ¨æµ‹è¯•ï¼Œå…¬å¼€æµ‹è¯•ç‰ˆæœ¬ï¼›</li><li>æ„å»ºç”Ÿäº§ç‰ˆæœ¬å¹¶ä¸Šä¼ è‡³ ITCï¼ˆåŒ…æ‹¬æ›´æ–°é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºæ–°çš„å±å¹•æˆªå›¾ï¼Œä¸Šä¼ åº”ç”¨å¹¶æäº¤å®¡æ ¸ï¼‰ï¼›</li><li>â€¦</li></ul><h2 id="ç³»ç»Ÿè¦æ±‚"><a href="#ç³»ç»Ÿè¦æ±‚" class="headerlink" title="ç³»ç»Ÿè¦æ±‚"></a>ç³»ç»Ÿè¦æ±‚</h2><ul><li>ä¼šç¼–ç¨‹</li><li>Xcode7+</li><li>Mac OS 10.11+</li></ul><h2 id="å·¥å…·é›†"><a href="#å·¥å…·é›†" class="headerlink" title="å·¥å…·é›†"></a>å·¥å…·é›†</h2><p><code>fastlane</code> å°†å¦‚ä¸‹çš„å·¥å…·å¥—ä»¶æœ‰æœºåœ°ç»“åˆèµ·æ¥,ä»ç®¡ç†è¯ä¹¦åˆ°å•å…ƒæµ‹è¯•,ä»ç¼–è¯‘æ‰“åŒ…åˆ°ä¸Šä¼ å‘å¸ƒ,éƒ½èƒ½é€šè¿‡å‘½ä»¤è¡Œè½»æ¾å®Œæˆ.è¯¥å¥—ä»¶æ”¯æŒä¸ <code>Jenkins</code> å’Œ <code>CocoaPods</code>ï¼Œ<code>xctools</code> ç­‰å…¶ä»–ç¬¬ä¸‰æ–¹å·¥å…·çš„é›†æˆ,å¹¶ä¸”èƒ½å¤Ÿå®šä¹‰å¤šä¸ªé€šé“ï¼ˆlanesï¼‰ä»¥æ”¯æŒä¸åŒçš„éƒ¨ç½²ç›®æ ‡ã€‚</p><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><ul><li><a href="https://github.com/fastlane/fastlane/tree/master/scan" target="_blank" rel="noopener">scan</a> =&gt; è‡ªåŠ¨è¿è¡Œæµ‹è¯•å·¥å…·ï¼Œå¹¶ä¸”å¯ä»¥ç”Ÿæˆæ¼‚äº®çš„ HTML æŠ¥å‘Š</li></ul><h3 id="è¯ä¹¦ï¼Œé…ç½®æ–‡ä»¶"><a href="#è¯ä¹¦ï¼Œé…ç½®æ–‡ä»¶" class="headerlink" title="è¯ä¹¦ï¼Œé…ç½®æ–‡ä»¶"></a>è¯ä¹¦ï¼Œé…ç½®æ–‡ä»¶</h3><ul><li><a href="https://github.com/fastlane/fastlane/tree/master/cert" target="_blank" rel="noopener">cert</a> =&gt; è‡ªåŠ¨åˆ›å»ºç®¡ç† iOS ä»£ç ç­¾åè¯ä¹¦</li><li><a href="https://github.com/fastlane/fastlane/tree/master/sigh" target="_blank" rel="noopener">sigh</a> =&gt; ä¸€å£°å¹æ¯å•Šï¼Œè¿™ä¹ˆå¤šå¹´å’Œ <code>Provisioning Profile</code>æˆ˜æ–—è¿‡æ— æ•°æ¬¡ã€‚æ€»æ˜¯æœ‰è¿™æ ·é‚£æ ·çš„é—®é¢˜å¯¼è‡´é…ç½®æ–‡ä»¶è¿‡æœŸæˆ–è€…å¤±æ•ˆã€‚<code>sigh</code> æ˜¯ç”¨æ¥åˆ›å»ºã€æ›´æ–°ã€ä¸‹è½½ã€ä¿®å¤ <code>Provisioning Profile</code> çš„å·¥å…·ã€‚</li><li><a href="https://github.com/fastlane/fastlane/tree/master/pem" target="_blank" rel="noopener">pem</a> =&gt; è‡ªåŠ¨ç”Ÿæˆã€æ›´æ–°æ¨é€é…ç½®æ–‡ä»¶</li><li><a href="https://github.com/fastlane/fastlane/tree/master/match" target="_blank" rel="noopener">match</a> =&gt; ä¸€ä¸ªæ–°çš„è¯ä¹¦å’Œé…ç½®æ–‡ä»¶ç®¡ç†å·¥å…·ã€‚æˆ‘ä¼šå¦å†™ä¸€ç¯‡æ–‡ç« ä¸“é—¨ä»‹ç»è¿™ä¸ªå·¥å…·ã€‚ä»–ä¼šæ‰€æœ‰éœ€è¦ç”¨åˆ°çš„è¯ä¹¦ä¼ åˆ° git ç§æœ‰åº“ä¸Šï¼Œä»»ä½•éœ€è¦é…ç½®çš„æœºå™¨ç›´æ¥ç”¨ <code>match</code> åŒæ­¥å›æ¥å°±ä¸ç”¨ç®¡è¯ä¹¦é—®é¢˜äº†ï¼Œå°å›¢é˜Ÿç¦éŸ³å•Šï¼</li></ul><h3 id="æˆªå›¾"><a href="#æˆªå›¾" class="headerlink" title="æˆªå›¾"></a>æˆªå›¾</h3><ul><li><a href="https://github.com/fastlane/fastlane/tree/master/snapshot" target="_blank" rel="noopener">snapshot</a> =&gt; ç”¨ <code>Xcode7</code> æ¨å‡ºçš„ <code>UI test</code> åŠŸèƒ½å®ç°è‡ªåŠ¨åŒ–æˆªå›¾</li><li><a href="https://github.com/fastlane/fastlane/tree/master/frameit" target="_blank" rel="noopener">frameit</a> =&gt; å¯ä»¥æŠŠæˆªçš„å›¾ç‰‡è‡ªåŠ¨å¥—ä¸Šä¸€å±‚å¤–è¾¹æ¡†</li></ul><h3 id="å‘å¸ƒ"><a href="#å‘å¸ƒ" class="headerlink" title="å‘å¸ƒ"></a>å‘å¸ƒ</h3><ul><li><a href="https://github.com/fastlane/fastlane/tree/master/produce" target="_blank" rel="noopener">produce</a> =&gt; å¦‚æœä½ çš„äº§å“è¿˜æ²¡åœ¨ iTunes Connect(iTC) æˆ–è€… Apple Developer Center(ADC) å»ºç«‹ï¼Œproduce å¯ä»¥è‡ªåŠ¨å¸®ä½ å®Œæˆè¿™äº›å·¥ä½œ</li><li><a href="https://github.com/fastlane/fastlane/tree/master/deliver" target="_blank" rel="noopener">deliver</a> =&gt; è‡ªåŠ¨ä¸Šä¼ æˆªå›¾ï¼ŒAPP çš„å…ƒæ•°æ®ï¼ŒäºŒè¿›åˆ¶ (ipa) æ–‡ä»¶åˆ° iTunes Connect</li></ul><h3 id="TestFlight-ç®¡ç†"><a href="#TestFlight-ç®¡ç†" class="headerlink" title="TestFlight ç®¡ç†"></a>TestFlight ç®¡ç†</h3><ul><li><a href="https://github.com/fastlane/fastlane/tree/master/pilot" target="_blank" rel="noopener">pilot</a> =&gt; ç®¡ç† <code>TestFlight</code> çš„æµ‹è¯•ç”¨æˆ·ï¼Œä¸Šä¼ äºŒè¿›åˆ¶æ–‡ä»¶</li><li><a href="https://github.com/fastlane/boarding" target="_blank" rel="noopener">boarding</a> =&gt; å»ºç«‹ä¸€ä¸ªæ·»åŠ æµ‹è¯•ç”¨æˆ·ç•Œé¢ï¼Œå‘ç»™æµ‹è¯•è€…ï¼Œå¯è‡ªè¡Œæ·»åŠ é‚®ä»¶åœ°å€ï¼Œå¹¶åŒæ­¥åˆ° <code>iTC</code></li></ul><h3 id="è¾…åŠ©å·¥å…·"><a href="#è¾…åŠ©å·¥å…·" class="headerlink" title="è¾…åŠ©å·¥å…·"></a>è¾…åŠ©å·¥å…·</h3><ul><li><a href="https://github.com/fastlane/fastlane/tree/master/spaceship" target="_blank" rel="noopener">spaceship</a> =&gt; ä¸º <code>pilot</code>ï¼Œ<code>boarding</code>å’Œ <code>deliver</code>ç­‰å·¥å…·æä¾›å’Œ iTC å’Œ ADC çš„äº¤äº’ APIã€‚<code>spaceship</code>æœ¬æ¥æ˜¯ä¸ªç‹¬ç«‹çš„é¡¹ç›®ï¼Œåæ¥è¢« <code>Fastlane</code> æ”¶ç¼–è¿›æ¥</li><li><a href="https://github.com/fastlane/fastlane/tree/master/watchbuild" target="_blank" rel="noopener">WatchBuild</a> =&gt; æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ iTC ç›‘æ§å·¥å…·ï¼Œå¼€å¯ <code>WatchBuild</code> å¯ä»¥ç›‘æ§ iTC ä¸Šçš„æ–‡ä»¶çŠ¶æ€ï¼Œå¼¹å‡º MacOS è‡ªå¸¦çš„ Notification</li></ul><h3 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h3><ul><li><a href="https://github.com/fastlane/fastlane/tree/master/supply#readme" target="_blank" rel="noopener">supply</a> =&gt; è‡ªåŠ¨ä¸Šä¼ åˆ° Google Play å·¥å…·</li><li><a href="https://github.com/fastlane/fastlane/tree/master/screengrab#readme" target="_blank" rel="noopener">screengrab</a> =&gt; Android çš„è‡ªåŠ¨æˆªå›¾å·¥å…·</li></ul><h2 id="ç®€ä¾‹"><a href="#ç®€ä¾‹" class="headerlink" title="ç®€ä¾‹"></a>ç®€ä¾‹</h2><p>fastlane å‘½ä»¤æ˜¯ä¸€ä¸ªæµç¨‹æ§åˆ¶çš„å‘½ä»¤è¡Œå·¥å…·(CLI)ï¼Œé€šè¿‡å†…éƒ¨é›†æˆ <code>action</code> å’Œç¬¬ä¸‰æ–¹çš„ <code>action</code> å®Œæˆä¸€ç³»åˆ—æ§åˆ¶æµç¨‹ã€‚è¿è¡Œ fastlane å‘½ä»¤è¡Œå·¥å…·ï¼Œä¼šè¯»å–å½“å‰ç›®å½•æˆ–è€… <code>./fastlane</code> ç›®å½•ä¸‹çš„ <code>Fastfile</code> é…ç½®æ–‡ä»¶ã€‚</p><p>åœ¨ <code>Fastfile</code> ä¸­ï¼š</p><ul><li><code>action</code> =&gt; Fastlane ä¸­çš„æ¯ä¸€æ¡å‘½ä»¤éƒ½æ˜¯ä¸€ä¸ªæ‰©å±•(action)ï¼Œä¸Šé¢æåˆ°çš„ <code>deliver</code>ï¼Œ<code>sigh</code>ä¹‹ç±»çš„å·¥å…·æœ¬èº«æ˜¯ CLIï¼Œä½†æ˜¯åœ¨ Fastlane ä¸­å†…åµŒäº†å¯¹ä»–ä»¬æ”¯æŒçš„ <code>action</code></li><li><code>lane</code> =&gt; Fastlane ä¸­æµç¨‹çš„åˆé›†ï¼Œæ¯ä¸€ä¸ªåŠ¨ä½œå³å¯ä»¥æ˜¯ <code>action</code>ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–çš„ <code>lane</code>ã€‚è¯­æ³•å’Œ ruby ä¸­çš„ rake éå¸¸åƒ</li></ul><p>ä¸€ä¸ªç®€å•çš„å‘å¸ƒæµç¨‹ï¼š</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">lane <span class="symbol">:deploy</span> <span class="keyword">do</span></span><br><span class="line">  <span class="comment"># æ‰§è¡Œ pod instasll</span></span><br><span class="line">  cocoapods</span><br><span class="line">  <span class="comment"># æ‰§è¡Œ carthage bootstrap</span></span><br><span class="line">  carthage</span><br><span class="line">  <span class="comment"># å¢åŠ buildç‰ˆæœ¬å·</span></span><br><span class="line">  increment_build_number</span><br><span class="line">  <span class="comment"># ç¼–è¯‘ä»£ç </span></span><br><span class="line">  gym</span><br><span class="line">  <span class="comment"># å‘å¸ƒåˆ°Apple Store</span></span><br><span class="line">  deliver(<span class="symbol">force:</span> <span class="literal">true</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>å¦‚æœ ruby ç‰ˆæœ¬æ»¡è¶³è¦æ±‚ï¼Œå¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… fastlane</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®‰è£…fastlane</span></span><br><span class="line">sudo gem install -n /usr/<span class="built_in">local</span>/bin fastlane</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨çš„ç¯å¢ƒæ­å»ºå¥½äº†ï¼Œå°±å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥æ¥é…ç½® fastlane</p><h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><p>æ‰§è¡Œé»˜è®¤çš„åˆå§‹åŒ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd é¡¹ç›®ç›®å½•</span><br><span class="line">fastlane init</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ çš„é¡¹ç›®åªæœ‰ä¸€ä¸ª bundle id ä¹Ÿåªæœ‰ä¸€ä¸ªå¼€å‘è€…è´¦å·çš„è¯ï¼Œå¯ä»¥ç›´æ¥éµå¾ªå®˜æ–¹çš„æ­¥éª¤é…ç½®ã€‚å¦åˆ™éœ€è¦æŒ‰ç…§å®˜æ–¹æ–‡æ¡£ï¼Œé…ç½®ä¸åŒå‚æ•°å’Œç¯å¢ƒå˜é‡ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Last login: Tue Aug  7 13:19:59 on ttys000</span><br><span class="line">yuhanle:360qws-G100 yuhanle$ fastlane init</span><br><span class="line">[âœ”] ğŸš€ </span><br><span class="line">[âœ”] Looking for iOS and Android projects in current directory...</span><br><span class="line">[13:33:35]: Created new folder './fastlane'.</span><br><span class="line">[13:33:35]: Detected an iOS/macOS project in the current directory: 'G100.xcworkspace'</span><br><span class="line">[13:33:35]: -----------------------------</span><br><span class="line">[13:33:35]: --- Welcome to fastlane ğŸš€ ---</span><br><span class="line">[13:33:35]: -----------------------------</span><br><span class="line">[13:33:35]: fastlane can help you with all kinds of automation for your mobile app</span><br><span class="line">[13:33:35]: We recommend automating one task first, and then gradually automating more over time</span><br><span class="line">[13:33:35]: What would you like to use fastlane for?</span><br><span class="line">1. ğŸ“¸  Automate screenshots</span><br><span class="line">2. ğŸ‘©â€âœˆï¸  Automate beta distribution to TestFlight</span><br><span class="line">3. ğŸš€  Automate App Store distribution</span><br><span class="line">4. ğŸ›   Manual setup - manually setup your project to automate your tasks</span><br><span class="line">?</span><br></pre></td></tr></table></figure><p>åœ¨æé—®äº†ä½ çš„ <code>Apple ID</code>ï¼Œ<code>Team</code> çš„é—®é¢˜ä¹‹åï¼Œfastlane ä¼šè‡ªåŠ¨æ£€æµ‹å½“å‰ç›®å½•ä¸‹é¡¹ç›®çš„ <code>App Name</code> å’Œ <code>App Identifier</code>ã€‚å¦‚æœæ£€æµ‹çš„ä¸å¯¹ï¼Œé€‰æ‹© <code>n</code> è‡ªè¡Œè¾“å…¥ã€‚</p><p>æ¥ä¸‹æ¥ä¼šé—®ä½ è¿™ä¸ª app æ˜¯å¦éœ€è¦åœ¨ iTC å’Œ ADC ä¸­åˆ›å»º(ä¸Šä¸€æ­¥ä¸­å¦‚æœé€‰æ‹© <code>y</code> ä¼šè‡ªåŠ¨æ£€æµ‹æ˜¯å¦éœ€è¦åˆ›å»º)ï¼Œfastlane ä¼šè°ƒç”¨ <code>produce</code> è¿›è¡Œåˆå§‹åŒ–ï¼Œå¦‚æœç°åœ¨è¿˜ä¸æƒ³åˆ›å»ºï¼Œä¹Ÿå¯ä»¥ä¹‹åå†è¿è¡Œ <code>produce init</code> è¿›è¡Œè¿™ä¸ªæµç¨‹ã€‚å¦‚æœä¸æ‰§è¡Œ <code>produce</code> çš„æµç¨‹ï¼Œ<code>deliver</code> çš„æµç¨‹ä¹Ÿä¼šè¢«æ è¿‡ï¼Œå½“ç„¶ä¹‹åä¹Ÿå¯ä»¥ <code>deliver init</code> è¿è¡Œå®Œå…¨ä¸€æ ·çš„æµç¨‹ã€‚</p><p>åœ¨æ‰§è¡Œ <code>deliver init</code> çš„è¿‡ç¨‹ä¸­ï¼Œä¼šåŒæ­¥ iTC ä¸­çš„æ‰€æœ‰è¯­è¨€çš„å…ƒæ•°æ®å’Œæˆªå›¾ï¼Œå¹¶æŒ‰ç…§ç›®å½•ç»“æ„ç»„ç»‡å¥½ã€‚ç›®å½•ç»“æ„åº”è¯¥ç±»ä¼¼ä¸‹é¢ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">fastlane</span><br><span class="line">â”œâ”€â”€ Appfile</span><br><span class="line">â”œâ”€â”€ Deliverfile</span><br><span class="line">â”œâ”€â”€ Fastfile</span><br><span class="line">â”œâ”€â”€ metadata</span><br><span class="line">â”‚   â”œâ”€â”€ copyright.txt</span><br><span class="line">â”‚   â”œâ”€â”€ en-US</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ description.txt</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ keywords.txt</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ marketing_url.txt</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ name.txt</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ privacy_url.txt</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ release_notes.txt</span><br><span class="line">â”‚   â”‚   â””â”€â”€ support_url.txt</span><br><span class="line">â”‚   â”œâ”€â”€ primary_category.txt</span><br><span class="line">â”‚   â”œâ”€â”€ primary_first_sub_category.txt</span><br><span class="line">â”‚   â”œâ”€â”€ primary_second_sub_category.txt</span><br><span class="line">â”‚   â”œâ”€â”€ secondary_category.txt</span><br><span class="line">â”‚   â”œâ”€â”€ secondary_first_sub_category.txt</span><br><span class="line">â”‚   â”œâ”€â”€ secondary_second_sub_category.txt</span><br><span class="line">â”‚   â””â”€â”€ zh-Hans</span><br><span class="line">â”‚       â”œâ”€â”€ description.txt</span><br><span class="line">â”‚       â”œâ”€â”€ keywords.txt</span><br><span class="line">â”‚       â”œâ”€â”€ marketing_url.txt</span><br><span class="line">â”‚       â”œâ”€â”€ name.txt</span><br><span class="line">â”‚       â”œâ”€â”€ privacy_url.txt</span><br><span class="line">â”‚       â”œâ”€â”€ release_notes.txt</span><br><span class="line">â”‚       â””â”€â”€ support_url.txt</span><br><span class="line">â””â”€â”€ screenshots</span><br><span class="line">    â”œâ”€â”€ README.txt</span><br><span class="line">    â”œâ”€â”€ en-US</span><br><span class="line">    â”‚   â”œâ”€â”€ ä¸€å †pngå›¾ç‰‡</span><br></pre></td></tr></table></figure><p>è¿™é‡Œè‚¯å®šä¼šè¢«åˆ›å»ºçš„æ˜¯ <code>Appfile</code> å’Œ <code>Fastfile</code>ã€‚å¦‚æœ <code>Deliverfile</code>ï¼Œ<code>screenshots</code> å’Œ <code>metadata</code> ç›®å½•æ²¡è¢«åˆ›å»ºï¼Œå¯ä»¥è¿è¡Œ <code>deliver init</code> æ¥åˆ›å»ºã€‚</p><ul><li>Fastfile =&gt; ç”¨æ¥å®šä¹‰æ‰€æœ‰çš„ lane ä»»åŠ¡ <a href="https://github.com/fastlane/fastlane/tree/master/fastlane/docs#fastfile" target="_blank" rel="noopener">Fastfileå¸®åŠ©</a></li><li>Appfile =&gt; æ˜¯ç”¨æ¥å­˜å‚¨ä¸€äº›å…¬å…±ä¿¡æ¯çš„ï¼Œæ¯”å¦‚ <code>app_identifier</code>ï¼Œ<code>apple_id</code>ï¼Œ<code>team_id</code>ï¼Œ<code>itc_team_id</code>ç­‰ã€‚<a href="https://github.com/fastlane/fastlane/blob/master/fastlane/docs/Appfile.md" target="_blank" rel="noopener">Appfileå¸®åŠ©</a></li><li>Deliverfile =&gt; <code>deliver</code> çš„é…ç½®æ–‡ä»¶ <a href="https://github.com/fastlane/fastlane/blob/master/deliver/Deliverfile.md" target="_blank" rel="noopener">Deliverfileå¸®åŠ©</a></li></ul><p><strong>PS</strong>:</p><ol><li>è¿™é‡Œæœ‰ä¸ªå°é—®é¢˜ï¼ŒiTC å’Œ ADC ä¸­çš„ <code>Team ID</code> æ˜¯ä¸ä¸€æ ·çš„ï¼Œåœ¨ <code>fastlane init</code> ä¸­åªä¼šè‡ªåŠ¨åœ¨ Appfile é‡Œå†™å…¥ ADC çš„ <code>team_id</code>ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šä¸åœçš„é—®ä½  iTC çš„ <code>Team ID</code>ï¼Œæ‰€ä»¥åœ¨åˆ›å»ºå®Œ Appfile åï¼Œæ‰‹åŠ¨åœ¨é‡Œé¢æ·»åŠ  <code>itc_team_id</code>ã€‚</li><li>è¿™ä¸ªé—®ç­”å¯¹ä¸åŒçš„é¡¹ç›®å¯èƒ½æœ‰å„ç§å„æ ·çš„åˆ†æ”¯ã€‚æˆ‘å·²ç»ç”¨ä¸åŒçš„é¡¹ç›®è¯•è¿‡å¾ˆå¤šæ¬¡äº†ï¼Œä½†æ˜¯å¯èƒ½è¿˜ä¸æ˜¯å…¨éƒ¨ï¼Œæ‰€ä»¥ä½ è¿˜éœ€è¦è§æ‹›æ‹†æ‹›ã€‚</li><li>åœ¨è¿™é‡Œå¯ä»¥å®‰å¿ƒçš„è¾“å…¥å¯†ç ï¼Œæ‰€æœ‰çš„å¯†ç éƒ½åŠ å¯†ä¿å­˜åœ¨ç³»ç»Ÿçš„ Keychain é‡Œã€‚</li></ol><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p><img src="http://7xqhcq.com1.z0.glb.clouddn.com/fastlane/QQ20180807-133643@2x.png" alt=""></p><p>fastlane å¯ä»¥é€šè¿‡é…ç½® .env æ–‡ä»¶ã€Appfileã€Deliverfileã€Fastfile æ¥å®Œæˆå„ç§å·¥ä½œã€‚</p><p>å…¶ä¸­ Fastfile æ˜¯æœ€æ ¸å¿ƒçš„ç”¨æ¥æ§åˆ¶æµç¨‹èµ°å‘çš„é…ç½®æ–‡ä»¶ï¼Œ.env å’Œ Appfile å¯ä»¥è¾…åŠ© Fastfile æ¥è®¾ç½®ä¸€äº›å‚æ•°ï¼ŒDeliverfile å¯ç”¨äºé…ç½®æäº¤ iTunesConnect çš„ä¸€äº›å‚æ•°ã€‚</p><p>éœ€è¦æŸ¥çœ‹ï¼Œæ ·ä¾‹é…ç½®å¯ç›´æ¥å‰å¾€<a href="http://devhy.com/2018/01/23/26-fastlane-usage/#%E4%B8%8B%E8%BD%BD%E6%A0%B7%E4%BE%8B%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener">ä¸‹è½½æ ·ä¾‹é…ç½®</a></p><h4 id="Appfile"><a href="#Appfile" class="headerlink" title="Appfile"></a>Appfile</h4><p>Appfileæ˜¯ç”¨æ¥é…ç½®ä¸€äº›ç±»ä¼¼äº AppleIDã€BundleID å‚æ•°(å‚æ•°æ˜¯ fastlane å·²ç»å®šä¹‰å¥½çš„ï¼Œæ–°å¢çš„å¹¶æ²¡æœ‰ç”¨ï¼Œå¦‚æœæƒ³æ–°å¢å˜é‡éœ€è¦ä½¿ç”¨ .env æ–¹å¼)ï¼Œå¯ä»¥åœ¨ Fastfile ä¸­ä½¿ç”¨ï¼ŒAppleIDã€BundleID ç­‰å…¶å®ä¼šè¢«ä¸€äº› actions ç›´æ¥è°ƒç”¨ï¼Œå¹¶ä¸éœ€è¦å†™å‡ºæ¥ä¼ é€’ã€‚</p><h5 id="æ™®é€šé…ç½®æ–¹å¼"><a href="#æ™®é€šé…ç½®æ–¹å¼" class="headerlink" title="æ™®é€šé…ç½®æ–¹å¼"></a>æ™®é€šé…ç½®æ–¹å¼</h5><p>ç›´æ¥åœ¨ Appfile é‡Œå¡«å†™ app_identifierã€apple_idã€team_id ç­‰ï¼Œç„¶åæ ¹æ® lane çš„ä¸åŒå¯ä»¥è®¾ç½®æˆä¸åŒã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é»˜è®¤é…ç½®</span></span><br><span class="line">app_identifier <span class="string">"com.xxxxxxxxxx.test"</span></span><br><span class="line">apple_id <span class="string">"xxxxxxxxxx@xxxx.com"</span></span><br><span class="line">team_id <span class="string">"xxxxxxxxxx"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœlaneæ˜¯entæ¢æˆDevçš„é…ç½®</span></span><br><span class="line">for_lane <span class="symbol">:ent</span> <span class="keyword">do</span></span><br><span class="line">  app_identifier <span class="string">"com.xxxxxxxxxx.testDev"</span></span><br><span class="line">  apple_id <span class="string">"xxxxxxxxxx@xxxx.com"</span></span><br><span class="line">  TEAM_ID <span class="string">"xxxxxxxxxx"</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h5 id="ä½¿ç”¨-env-é…ç½®æ–¹å¼"><a href="#ä½¿ç”¨-env-é…ç½®æ–¹å¼" class="headerlink" title="ä½¿ç”¨ .env é…ç½®æ–¹å¼"></a>ä½¿ç”¨ .env é…ç½®æ–¹å¼</h5><p><a href="https://docs.fastlane.tools/advanced/#environment-variables" target="_blank" rel="noopener">.env</a> è¿™ä¸ªæ–‡ä»¶çš„ä½œç”¨æ˜¯ä½œä¸ºç¯å¢ƒå˜é‡çš„é…ç½®æ–‡ä»¶ï¼Œåœ¨ fastlane init è¿›è¡Œåˆå§‹åŒ–åå¹¶ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œå¦‚æœéœ€è¦å¯ä»¥è‡ªå·±åˆ›å»ºã€‚</p><p>æ‰§è¡Œæ—¶é»˜è®¤ä¼šè¯»å– <code>.env</code> å’Œ <code>.env.default</code> æ–‡ä»¶é‡Œçš„é…ç½®ã€‚é€šè¿‡æ‰§è¡Œ <code>fastlane [lane-name] --env [envName]</code> æ¥æŒ‡å®šä½¿ç”¨é…ç½®æ–‡ä»¶ <code>.env.[envName]</code>ï¼Œè¯»å–é¡ºåºæ˜¯ <code>.env -&gt; .env.default -&gt; .env.&lt;envName&gt;</code>ï¼Œç›¸åŒçš„å˜é‡åä¼šè¢«åé¢çš„è¦†ç›–ã€‚</p><p>å¦‚æˆ‘å»ºäº†æ–‡ä»¶ .env.myDevï¼Œé‡Œé¢å†™äº†ä¸€äº›å‚æ•°ï¼Œé‚£åœ¨æ‰§è¡Œçš„æ—¶å€™ä½¿ç”¨ <code>fastlane [lane-name] --env myDev</code> å³å¯ï¼Œæƒ³åœ¨ Appfileã€Deliverfileã€Fastfile ç­‰è°ƒç”¨ï¼Œç›´æ¥ä½¿ç”¨ <code>ENV[&#39;keyName&#39;]</code> å³å¯</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># .env.myDevæ–‡ä»¶</span></span><br><span class="line"><span class="comment"># bundle id</span></span><br><span class="line">App_Identifier = <span class="string">"com.xxxxxxxxxx.testDev"</span></span><br><span class="line"><span class="comment"># å¼€å‘è€…è´¦å·</span></span><br><span class="line">Apple_Id = <span class="string">"xxxxxxxxxx@xxxx.com"</span></span><br><span class="line"><span class="comment"># å¼€å‘è€…TeamId</span></span><br><span class="line">Team_Id  = <span class="string">"xxxxxxxxxx"</span></span><br><span class="line"><span class="comment"># projectçš„target schemeåç§°</span></span><br><span class="line">Scheme   = <span class="string">"xxxxxxxxxx"</span></span><br></pre></td></tr></table></figure><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Appfileä½¿ç”¨.envæ–¹å¼ç›´æ¥è¯»å–å˜é‡å³å¯</span></span><br><span class="line">app_identifier	 ENV[<span class="string">'App_Identifier'</span>]</span><br><span class="line">apple_id 		 ENV[<span class="string">'Apple_Id'</span>]</span><br><span class="line">team_id			 ENV[<span class="string">'Team_Id'</span>]</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šå› ä¸ºæ˜¯ .env æ–‡ä»¶æ˜¯.å¼€å¤´æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯åœ¨ finder ä¸­éšè—çš„ï¼Œéœ€è¦é€šè¿‡æ‰§è¡Œä¸€ä¸‹å‘½ä»¤æ¥æ˜¾ç¤º</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> è®¾ç½®éšè—æ–‡ä»¶å¯è§</span></span><br><span class="line">defaults write com.apple.finder AppleShowAllFiles TRUE</span><br><span class="line"><span class="meta">#</span><span class="bash"> é‡å¯finderæœåŠ¡ä»¥ç”Ÿæ•ˆ</span></span><br><span class="line">killall Finder</span><br></pre></td></tr></table></figure><h5 id="é…ç½®æ–¹å¼å¯¹æ¯”"><a href="#é…ç½®æ–¹å¼å¯¹æ¯”" class="headerlink" title="é…ç½®æ–¹å¼å¯¹æ¯”"></a>é…ç½®æ–¹å¼å¯¹æ¯”</h5><ul><li>æ™®é€šé…ç½®æ–¹å¼ï¼šç®€å•æ˜“æ‡‚ï¼Œä½†ä¸èƒ½è‡ªå®šä¹‰å˜é‡ï¼Œä¸”æ¯ä¸ª lane æƒ³ä¸ä¸€æ ·éƒ½è¦å†™ä¸€ä¸ª for_lane</li><li>.env é…ç½®æ–¹å¼ï¼šåŠŸèƒ½æ€§å¼ºï¼Œä½†é…ç½®èµ·æ¥ç¨å¾®éº»çƒ¦ä¸€ç‚¹</li></ul><h4 id="Fastfile"><a href="#Fastfile" class="headerlink" title="Fastfile"></a>Fastfile</h4><p>Fastfile æ˜¯å¯¹æµç¨‹è¿›è¡Œæ§åˆ¶çš„æ ¸å¿ƒæ–‡ä»¶ï¼Œéœ€è¦è®¾å®šæ”¯æŒçš„å¹³å°å’Œåœ¨ä¸€äº›ç¯èŠ‚é‡Œéœ€è¦åšçš„äº‹æƒ…ï¼Œæ˜¯æˆ‘ä»¬è„šæœ¬çš„å…¥å£ï¼Œæ‰€æœ‰çš„äº‹ä»¶é©±åŠ¨éƒ½æ˜¯åœ¨è¿™ä¸ªæ–‡ä»¶æ¥è°ƒåº¦çš„ã€‚</p><h5 id="Lane"><a href="#Lane" class="headerlink" title="Lane"></a><a href="https://github.com/fastlane/fastlane/tree/master/lane" target="_blank" rel="noopener">Lane</a></h5><p>æœ‰äº† <code>Fastfile</code>ï¼Œå°±å¯ä»¥æ·»åŠ è‡ªå·±çš„å‘å¸ƒæµç¨‹äº†ã€‚æ‰“å¼€Fastfileæ–‡ä»¶(è¿™é‡Œæˆ‘ç”¨Sublime è®¾å®šè¯­æ³•ä¸ºRuby)ï¼Œå¦‚æœä¸å‡ºæ„å¤–çš„è¯ä½ ç”Ÿæˆçš„Fastfileå’Œæˆ‘åº”è¯¥å·®ä¸å¤šã€‚è¿™é‡Œæˆ‘å°±ä¸è´´å‡ºæ¥äº†ã€‚</p><p>æœ€å¼€å§‹å®šä¹‰äº†</p><ul><li><code>fastlane_version</code> =&gt; æŒ‡å®šfastlaneæœ€å°ç‰ˆæœ¬</li><li><code>default_platform</code> =&gt; æŒ‡å®šå½“å‰å¹³å°ï¼Œå¯é€‰ <code>ios,android,mac</code></li></ul><p>åœ¨ <code>platform</code> ä¸­å°±æ˜¯éœ€è¦ä¿®æ”¹çš„é‡ç‚¹ã€‚å…ˆå¿½ç•¥ <code>before_all</code>ï¼Œ<code>after_all</code>ï¼Œ<code>error</code> è¿™äº›æ–¹æ³•ï¼Œè¿™é‡Œçš„ <code>lane</code> å°±æ˜¯ä¸€ç»„ä»»åŠ¡ï¼Œä¸Šä¼ åˆ° Firim çš„ä»»åŠ¡å¦‚ä¸‹</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">lane <span class="symbol">:to_firim</span> <span class="keyword">do</span></span><br><span class="line">  <span class="comment"># å¦‚æœä½ ç”¨ pod install æ³¨æ„å‚æ•° -&gt; å¦åˆ™ä¼šå‡ºé”™</span></span><br><span class="line">  cocoapods(<span class="symbol">use_bundle_exec:</span> <span class="literal">false</span>)</span><br><span class="line">  <span class="comment"># å¦‚æœä½ æ²¡æœ‰ç”³è¯·adhocè¯ä¹¦ï¼Œsighä¼šè‡ªåŠ¨å¸®ä½ ç”³è¯·ï¼Œå¹¶ä¸”æ·»åŠ åˆ°Xcodeé‡Œ</span></span><br><span class="line">  sigh(<span class="symbol">adhoc:</span> <span class="literal">true</span>)</span><br><span class="line">  <span class="comment"># ä»¥ä¸‹ä¸¤ä¸ªactionæ¥è‡ªfastlane-plugin-versioningï¼Œ</span></span><br><span class="line">  <span class="comment"># ç¬¬ä¸€ä¸ªé€’å¢ Buildï¼Œç¬¬äºŒä¸ªè®¾å®šVersionã€‚</span></span><br><span class="line">  <span class="comment"># å¦‚æœä½ æœ‰å¤šä¸ªtargetï¼Œå°±å¿…é¡»æŒ‡å®štargetçš„å€¼ï¼Œå¦åˆ™å®ƒä¼šç›´æ¥æ‰¾æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªplistä¿®æ”¹</span></span><br><span class="line">  <span class="comment"># åœ¨è¿™é‡Œæˆ‘å»ºè®®æ¯ä¸€ä¸ªæ‰“çš„åŒ…çš„Buildéƒ½è¦ä¸ä¸€æ ·ï¼Œè¿™æ ·crashäº†æ‹¿åˆ°æ—¥å¿—ï¼Œå¯ä»¥å¯¹åº”åˆ°ipaä¸Š</span></span><br><span class="line">  increment_build_number_in_plist(<span class="symbol">target:</span> [target_name])</span><br><span class="line">  increment_version_number_in_plist(</span><br><span class="line">    <span class="symbol">target:</span> [target_name],</span><br><span class="line">    <span class="symbol">version_number:</span> <span class="string">'7.1.3'</span></span><br><span class="line">    )</span><br><span class="line">  <span class="comment"># gymç”¨æ¥ç¼–è¯‘ipa</span></span><br><span class="line">  gym(</span><br><span class="line">    <span class="symbol">output_directory:</span> <span class="string">'./firim'</span>,</span><br><span class="line">    <span class="symbol">export_options:</span> &#123;</span><br><span class="line">      <span class="symbol">method:</span> <span class="string">"ad-hoc"</span>, <span class="comment"># è¿™å¯ä»¥ä¸æŒ‡å®š</span></span><br><span class="line">      <span class="symbol">thinning:</span> <span class="string">"&lt;none&gt;"</span></span><br><span class="line">    &#125;</span><br><span class="line">    )</span><br><span class="line">  <span class="comment"># ä¸Šä¼ ipaåˆ°fir.imæœåŠ¡å™¨ï¼Œåœ¨fir.imè·å–firim_api_token</span></span><br><span class="line">  firim(<span class="symbol">firim_api_token:</span> [firim_api_token])</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h5 id="Sigh"><a href="#Sigh" class="headerlink" title="Sigh"></a><a href="https://github.com/fastlane/fastlane/tree/master/sigh" target="_blank" rel="noopener">Sigh</a></h5><p>å¦‚æœä½ ä¸ç¡®å®šè¯ä¹¦ç›®å‰æ˜¯å¦å¯ç”¨ï¼Œå¯ä»¥ç”¨ Sigh è‡ªåŠ¨ç”Ÿæˆè·å–è¯ä¹¦ã€‚Sigh ä¼šè‡ªåŠ¨æ ¹æ® Appfile é‡Œè®¾ç½®çš„ <code>app_identifier</code>ä» ADC (è‹¹æœå¼€å‘è€…ä¸­å¿ƒ)ç”Ÿæˆè¯ä¹¦ï¼Œå¹¶ä¸‹è½½åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹(ä¸æ˜¯ fastlane ç›®å½•)ï¼Œä¸‹è½½åè‡ªåŠ¨å®‰è£…ã€‚ä½ å¯ä»¥é€šè¿‡æŒ‡å®š <code>output_path</code> æŒ‡å®šè¯ä¹¦ä¸‹è½½ä½ç½®ã€‚</p><p>PSï¼šå»ºè®®ä¸è¦æŠŠè¿™ä¸ªæ–‡ä»¶å¤¹åŒæ­¥åˆ°é¡¹ç›®çš„ git ä¸­( Fastlane æä¾›äº† <code>match</code> ä¸“é—¨ç®¡ç†æ‰€æœ‰è¯ä¹¦)ã€‚å¯ä»¥åœ¨ .gitignore ä¸­å¯ä»¥å¿½ç•¥è¿™ä¸ªæ–‡ä»¶å¤¹ã€‚</p><p>Sigh å¸¸ç”¨çš„é…ç½®é¡¹ï¼š</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td>adhoc</td><td>bool</td><td>è·å–adhocè¯ä¹¦</td><td>fasle</td></tr><tr><td>development</td><td>bool</td><td>æ›´æ–°å¼€å‘è¯ä¹¦ï¼Œä¸æ›´æ–°<code>production</code>è¯ä¹¦</td><td>false</td></tr><tr><td>force</td><td>bool</td><td>å¼ºåˆ¶æ›´æ–°è¯ä¹¦ï¼Œä¸ç®¡è¯ä¹¦æ˜¯å¦åœ¨ADCä¸­å­˜åœ¨</td><td>false</td></tr></tbody></table><p>iOS é‡Œ code æ‰“åŒ…è¯ä¹¦æœ‰ 4 ç§ï¼Œadhocï¼Œinhouseï¼Œappstoreï¼Œdevelopment è¯ä¹¦ã€‚</p><table><thead><tr><th></th><th>ä»·æ ¼</th><th>AppStore è¯ä¹¦</th><th>In-House è¯ä¹¦</th><th>AdHoc è¯ä¹¦</th><th>Development è¯ä¹¦</th></tr></thead><tbody><tr><td>ä¼ä¸šå¸æˆ·</td><td>$299</td><td></td><td>âˆš</td><td>âˆš</td><td>âˆš</td></tr><tr><td>å…¬å¸è´¦å·</td><td>$99</td><td>âˆš</td><td></td><td>âˆš</td><td>âˆš</td></tr><tr><td>ä¸ªäººè´¦æˆ·</td><td>$99</td><td>âˆš</td><td></td><td>âˆš</td><td>âˆš</td></tr></tbody></table><p>å…¶ä¸­ <code>In-House</code> çš„æ–¹å¼æ‰“åŒ…çš„ipaå®‰è£…æ²¡æœ‰è®¾å¤‡çš„é™åˆ¶ã€‚<code>AdHoc</code> æ‰“åŒ…çš„ ipa å¿…é¡»æå‰æŠŠè®¾å¤‡çš„ UDID æ·»åŠ åˆ°è¯ä¹¦ä¸­ï¼Œå¹¶ä¸”æœ‰ 100 å°è®¾å¤‡é™åˆ¶ã€‚</p><p>æ‰€ä»¥å¦‚æœä½ ä¸æŒ‡å®š <code>adhoc</code> ä¸º <code>true</code>ï¼ŒSigh ä¼šè¯†åˆ«å¸æˆ·ç±»å‹ï¼Œä¼ä¸šå¸æˆ·é»˜è®¤ç”Ÿæˆ <code>In-House</code> è¯ä¹¦ï¼Œå…¬å¸è´¦å·å’Œä¸ªäººå¸æˆ·é»˜è®¤ç”Ÿæˆ AppStore è¯ä¹¦ã€‚</p><h5 id="Gym"><a href="#Gym" class="headerlink" title="Gym"></a><a href="https://github.com/fastlane/fastlane/tree/master/gym" target="_blank" rel="noopener">Gym</a></h5><p>Gym å¸¸ç”¨é…ç½®é¡¹ï¼š</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td>scheme</td><td>string</td><td>æŒ‡å®šéœ€è¦ç¼–è¯‘çš„scheme</td><td></td></tr><tr><td>clean</td><td>bool</td><td>æ˜¯å¦åœ¨ç¼–è¯‘å‰clean</td><td>false</td></tr><tr><td>output_directory</td><td>string</td><td>å¯¼å‡ºç›®å½•</td><td><code>./</code></td></tr><tr><td>output_name</td><td>string</td><td>å¯¼å‡ºipaåå­—</td><td>[app_name].ipa</td></tr><tr><td>export_options</td><td>hash/string</td><td>è¿™é‡ŒæŒ‡å®šXcode APIçš„å¤–éƒ¨é…ç½®æ–‡ä»¶åœ°å€ï¼Œæˆ–è€…é…ç½®hashï¼Œè§ä¸‹æ–‡</td><td></td></tr><tr><td>export_method</td><td>string</td><td>æ‰“åŒ…æ–¹å¼ï¼Œå¯é€‰é¡¹<code>app-store</code> <code>ad-hoc`</code>package<code></code>enterprise<code>development</code>developer-id`</td><td>å¦‚æœåœ¨fastlaneä¸­ä½¿ç”¨äº†sighï¼Œè¿™ä¸ªå€¼ä¼šä»ä¸Šä¸‹æ–‡è·å–</td></tr><tr><td>include_bitcode</td><td>bool</td><td>æ˜¯å¦å¼€å¯<code>bitcode</code></td><td>Xcode API é»˜è®¤å€¼ä¸ºtrue</td></tr><tr><td>include_symbols</td><td>bool</td><td>æ˜¯å¦ç”Ÿæˆç¬¦å·è¡¨</td><td>Xcode API é»˜è®¤å€¼ä¸ºtrue</td></tr></tbody></table><p>Xcode7 ä¹‹åï¼ŒXcode API å…è®¸æˆ‘ä»¬æŒ‡å®šä¸€ä¸ª <code>plist</code> æ–‡ä»¶ä½œä¸ºé¢å¤–çš„é…ç½®æ–‡ä»¶ã€‚gym é»˜è®¤ä¼šå¸®ä½ åˆ›å»ºè¿™ä¸ªæ–‡ä»¶ï¼Œä½ å¯ä»¥ç›´æ¥æŒ‡å®šé…ç½®ã€‚æ›´å¤šå…³äº plist å¯é…ç½®é¡¹ï¼Œæ‰§è¡Œ <code>xcodebuild -help</code> æŸ¥çœ‹ <code>Available keys for -exportOptionsPlist</code>ã€‚</p><p><code>export_method</code>ï¼Œ <code>include_symbols</code>ï¼Œå’Œ <code>include_bitcode</code> è¿™äº›å‚æ•°éƒ½æ˜¯ <code>exportOptionsPlist</code> çš„é…ç½®ï¼Œå¯¹åº” <code>method</code>ï¼Œ<code>uploadSymbols</code> å’Œ <code>uploadBitcode</code>ã€‚</p><p>Gym å¯ä»¥æŒ‡å®šé…ç½®æ–‡ä»¶ <a href="https://github.com/fastlane/fastlane/tree/master/gym#gymfile" target="_blank" rel="noopener"><code>Gymfile</code></a>ã€‚</p><p>åˆå§‹åŒ–ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gym init</span><br></pre></td></tr></table></figure><h4 id="Multi-Target"><a href="#Multi-Target" class="headerlink" title="Multi-Target"></a>Multi-Target</h4><p>å¦‚æœæˆ‘ä»¬éœ€è¦é…ç½®å¤šä¸ª target è¿›è¡Œæ‰“åŒ…çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <a href="https://link.juejin.im?target=https%3A%2F%2Fdocs.fastlane.tools%2Fadvanced%2F%23environment-variables" target="_blank" rel="noopener">ç¯å¢ƒå˜é‡</a>ï¼Œæ¥è¿›è¡Œé…ç½®ã€‚å‡å¦‚æˆ‘ä»¬ç°åœ¨æœ‰ä¸¤ä¸ª <code>target</code>ï¼Œ<code>targetA</code> å’Œ <code>targetB</code>ï¼Œåˆ™æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸¤ä¸ª <code>.env</code> æ–‡ä»¶ï¼Œä¾‹å¦‚ <code>.env.targetA</code>ï¼Œ<code>.env.targetB</code>ï¼Œæ”¾åœ¨ <code>Fastfile</code> æ–‡ä»¶åŒçº§ç›®å½•ä¸‹</p><p>åœ¨ <code>.env</code> æ–‡ä»¶é‡Œé¢æˆ‘ä»¬å¯ä»¥é…ç½®ä¸€äº›ä¸åŒçš„å†…å®¹ï¼ˆéå…¬å…±ï¼‰ï¼Œæ¯”å¦‚ <code>app_identifier</code>ï¼Œ<code>release_notes</code> ç­‰ç­‰ã€‚æˆªå›¾å¦‚ä¸‹ï¼š</p><p><img src="http://7xqhcq.com1.z0.glb.clouddn.com/fastlane/QQ20180807-142523@2x.png" alt=""></p><p>åœ¨ <code>Appfile</code>ï¼Œ<code>Deliverfile</code>ï¼Œ<code>Fastfile</code> ç­‰æ–‡ä»¶ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>.env</code> æ–‡ä»¶é‡Œé¢çš„å†…å®¹ã€‚</p><p>Appfile</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># Appfile</span><br><span class="line"></span><br><span class="line">#The bundle identifier of your app</span><br><span class="line">app_identifier ENV[&apos;APP_IDENTIFIER&apos;]</span><br><span class="line"></span><br><span class="line"># Your Apple email address</span><br><span class="line">apple_id ENV[&apos;APPLE_ID&apos;] </span><br><span class="line"></span><br><span class="line"># Developer Portal Team ID</span><br><span class="line">team_id ENV[&apos;TEAM_ID&apos;]</span><br><span class="line"></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure><p>Deliverfileï¼Œ<strong>è¯·åœ¨è®¾ç½® release_noresã€support_urlã€private_url ç­‰é…ç½®çš„æ—¶å€™ï¼Œé‡‡ç”¨ hash çš„æ–¹å¼å†™ã€‚</strong></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># app_identifier</span></span><br><span class="line">app_identifier ENV[<span class="string">'APP_IDENTIFIER'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨æˆ·å,Apple IDç”µå­é‚®ä»¶åœ°å€</span></span><br><span class="line">username ENV[<span class="string">'APPLE_ID'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># å›¢é˜ŸID</span></span><br><span class="line">team_id ENV[<span class="string">'TEAM_ID'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># å›¢é˜Ÿname</span></span><br><span class="line">team_name ENV[<span class="string">'TEAM_NAME'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># copyright</span></span><br><span class="line">copyright ENV[<span class="string">'COPYRIGHT'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é”®å­—</span></span><br><span class="line">keywords(</span><br><span class="line">	<span class="string">'zh-Hans'</span> =&gt; ENV[<span class="string">'KEYWORDS'</span>],</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°ç‰ˆæœ¬ä¿®æ”¹è®°å½•</span></span><br><span class="line">release_notes(</span><br><span class="line">	<span class="comment"># ä¸­å›½</span></span><br><span class="line">	<span class="string">'zh-Hans'</span> =&gt; ENV[<span class="string">'RELEASE_NOTES'</span>],</span><br><span class="line">	<span class="comment"># æ¾³å¤§åˆ©äºš</span></span><br><span class="line">	<span class="string">'en-au'</span> =&gt; ENV[<span class="string">'RELEASE_NOTES_AU'</span>],</span><br><span class="line">	<span class="comment"># ç¾å›½</span></span><br><span class="line">	<span class="string">'en-us'</span> =&gt; ENV[<span class="string">'RELEASE_NOTES_US'</span>]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ”¯æŒç½‘å€</span></span><br><span class="line">support_url(</span><br><span class="line">	<span class="comment"># ä¸­å›½</span></span><br><span class="line">	<span class="string">'zh-Hans'</span> =&gt; ENV[<span class="string">'SUPPORT_URL'</span>],</span><br><span class="line">	<span class="comment"># æ¾³å¤§åˆ©äºš</span></span><br><span class="line">	<span class="string">'en-au'</span> =&gt; ENV[<span class="string">'SUPPORT_URL_AU'</span>],</span><br><span class="line">	<span class="comment"># ç¾å›½</span></span><br><span class="line">	<span class="string">'en-us'</span> =&gt; ENV[<span class="string">'SUPPORT_URL_US'</span>]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># éšç§æ”¿ç­–ç½‘å€ å›½å®¶ä»£ç  https://www.cnblogs.com/Mien/archive/2008/08/22/1273950.html</span></span><br><span class="line">privacy_url(</span><br><span class="line">	<span class="comment"># ä¸­å›½</span></span><br><span class="line">	<span class="string">'zh-Hans'</span> =&gt; ENV[<span class="string">'PRIVACY_URL'</span>],</span><br><span class="line">	<span class="comment"># æ¾³å¤§åˆ©äºš</span></span><br><span class="line">	<span class="string">'en-au'</span> =&gt; ENV[<span class="string">'PRIVACY_URL_AU'</span>],</span><br><span class="line">	<span class="comment"># ç¾å›½</span></span><br><span class="line">	<span class="string">'en-us'</span> =&gt; ENV[<span class="string">'PRIVACY_URL_US'</span>]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸Šä¼ å®Œæˆåæäº¤æ–°ç‰ˆæœ¬è¿›è¡Œå®¡æŸ¥</span></span><br><span class="line">submit_for_review <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·³è¿‡HTMLæŠ¥å‘Šæ–‡ä»¶éªŒè¯</span></span><br><span class="line">force <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ç”¨iTCçš„åˆ†é˜¶æ®µå‘å¸ƒåŠŸèƒ½ ç°åº¦å‘å¸ƒ</span></span><br><span class="line">phased_release <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åº”ç”¨å®¡æ ¸å°ç»„çš„è”ç³»ä¿¡æ¯ app å®¡æ ¸ä¿¡æ¯</span></span><br><span class="line">app_review_information(</span><br><span class="line">  <span class="symbol">first_name:</span> <span class="string">"xx"</span>,</span><br><span class="line">  <span class="symbol">last_name:</span> <span class="string">"xx"</span>,</span><br><span class="line">  <span class="symbol">phone_number:</span> <span class="string">"+86 18888888888"</span>,</span><br><span class="line">  <span class="symbol">email_address:</span> <span class="string">"xxxx"</span>,</span><br><span class="line">  <span class="symbol">demo_user:</span> <span class="string">"test1@test.com"</span>,</span><br><span class="line">  <span class="symbol">demo_password:</span> <span class="string">"test123"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="Deliver"><a href="#Deliver" class="headerlink" title="Deliver"></a><a href="https://github.com/fastlane/fastlane/tree/master/deliver" target="_blank" rel="noopener">Deliver</a></h4><p>Deliver å¯ä»¥å®Œå…¨ç®¡ç†ä¸ iTC çš„äº¤äº’ã€‚å…¶ä¸­åŒ…æ‹¬ï¼š</p><ul><li>ä¸Šä¼ å’Œä¸‹è½½å¤šè¯­è¨€æˆªå›¾</li><li>ä¸Šä¼ å’Œä¸‹è½½å¤šè¯­è¨€å…ƒæ•°æ®</li><li>ä¸Šä¼ äºŒè¿›åˆ¶æ–‡ä»¶</li></ul><p>è¿˜è®°å¾—ä¸Šé¢<a href="https://whlsxl.github.io/fastlane1/#init" target="_blank" rel="noopener">åˆå§‹åŒ–</a>çš„æ—¶å€™åˆå§‹åŒ–çš„ <code>metadata</code>ï¼Œ<code>screenshots</code> ç›®å½•ä¹ˆï¼ŸiTC ä¸­çš„æ‰€æœ‰çš„å…ƒæ•°æ®ä¿¡æ¯éƒ½è¢«ä¿å­˜åœ¨ <code>metadata</code> ä¸­ï¼Œæ‰€æœ‰çš„æˆªå›¾ä¿¡æ¯éƒ½è¢«ä¿å­˜åœ¨ <code>screenshots</code> ä¸­ã€‚</p><p>metadataï¼š</p><ul><li>å¯ä»¥å¾ˆå®¹æ˜“çš„ç®¡ç†å¯¹åº”ç›®å½•ä¸‹çš„æ–‡ä»¶å’Œ iTC åå°çš„è¡¨å•é¡¹ï¼Œåœ¨æ‰§è¡Œ <code>deliver</code> æ—¶ä¼šè‡ªåŠ¨è¢«ä¼ åˆ° iTCã€‚</li><li>åœ¨ <code>metadata</code> ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå¦‚ <code>copyright.txt</code>ï¼Œæ˜¯æ²¡æœ‰æœ¬åœ°åŒ–çš„ï¼Œåœ¨äºŒå±‚ç›®å½•ä¸­çš„æ–‡ä»¶éƒ½æ˜¯éœ€è¦å¯¹åº”ä¸åŒè¯­è¨€çš„è¡¨å•é¡¹ã€‚</li><li>å¦‚æœä½ ä¸æƒ³ä¿®æ”¹æŸäº›é¡¹çš„ä¿¡æ¯ï¼Œç›´æ¥æŠŠå¯¹åº”çš„æ–‡ä»¶åˆ é™¤å³å¯ã€‚</li><li>æ‰€æœ‰è¿™äº›è¡¨å•é¡¹ä¹Ÿå¯ä»¥åœ¨ <code>Deliverfile</code> ä¸­æŒ‡å®šï¼Œ<code>Deliverfile</code> ä¸­æŒ‡å®šçš„é¡¹ä¼˜å…ˆçº§æ¯”æ–‡ä»¶é«˜</li></ul><p>screenshotsï¼š</p><ul><li>å¦‚æœä¸æƒ³æ›´æ”¹æˆªå›¾ï¼Œå¯ä»¥æŠŠæ•´ä¸ªæˆªå›¾ç›®å½•åˆ é™¤</li><li>å¦‚æœä¸ä½¿ç”¨ <code>snapshot</code> (è‡ªåŠ¨åŒ–æˆªå›¾)ï¼Œä¹Ÿå¯ä»¥è‡ªå·±æˆªå›¾æ”¾åˆ°å¯¹åº”ç›®å½•ä¸‹ï¼Œæ¯”ä¸€å¼ ä¸€å¼ ä¸Šä¼  iTC å¿«çš„å¤šã€‚æˆªå›¾åœ¨iTC ä¸­çš„æ’åˆ—é¡ºåºå°±æ˜¯æœ¬åœ°æ–‡ä»¶åçš„ã€Œå­—æ¯è¡¨é¡ºåºã€(åœ¨ç›®å½•ä¸­å³å‡»ï¼ŒæŒ‰æ–‡ä»¶åæ’åº)ã€‚<code>deliver</code>ä¼šè¯†åˆ«å›¾ç‰‡åˆ†è¾¨ç‡ï¼Œä¸Šä¼ åˆ°å¯¹åº”è®¾å¤‡ä¸­ã€‚</li></ul><p>å¦‚æœè¦é€šè¿‡ <code>deliver</code> ä¿®æ”¹å…ƒæ•°æ®æˆ–æˆªå›¾ï¼Œä½ å¿…é¡»æä¾›æ‰€æœ‰ iTC ä¸­æœ‰çš„è¯­è¨€ã€‚æ¯”å¦‚åå°ä¸­æœ‰ã€Œç®€ä½“ä¸­æ–‡ã€å’Œã€Œè‹±æ–‡ã€ï¼Œä½ ä¹Ÿå¿…é¡»æä¾›å¯¹åº”çš„ <code>zh-Hans</code> å’Œ <code>en-US</code> æ–‡ä»¶ï¼Œå¦åˆ™ <code>deliver</code> ä¼šæŠ¥ç¼ºå°‘è¯­è¨€çš„é”™è¯¯ã€‚å¯ä»¥åœ¨ iTC åå°æäº¤çš„ç‰ˆæœ¬ä¸­åˆ é™¤è¯­è¨€ã€‚</p><p>Deliver å¸¸ç”¨é…ç½®é¡¹ï¼š</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th><th>Default</th></tr></thead><tbody><tr><td>ipa</td><td>string</td><td><code>ipa</code>åœ°å€</td><td>å¦‚æœä½¿ç”¨<code>gym</code>ï¼Œå¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡è·å–</td></tr><tr><td>metadata_path</td><td>string</td><td>æŒ‡å®š<code>metadata</code>ç›®å½•åœ°å€</td><td>å¦‚æœåœ¨<code>fastlane</code>ä¸­<code>./fastlane/metadata</code>ï¼Œå¦‚æœä½œä¸ºç‹¬ç«‹çš„å‘½ä»¤è¡Œåº”ç”¨<code>./metadata</code></td></tr><tr><td>screenshots_path</td><td>string</td><td>æŒ‡å®š<code>screenshots</code>ç›®å½•åœ°å€</td><td>å¦‚æœåœ¨<code>fastlane</code>ä¸­<code>./fastlane/screenshots</code>ï¼Œå¦‚æœä½œä¸ºç‹¬ç«‹çš„å‘½ä»¤è¡Œåº”ç”¨<code>./screenshots</code></td></tr><tr><td>skip_binary_upload</td><td>bool</td><td>è·³è¿‡äºŒè¿›åˆ¶æ–‡ä»¶ä¸Šä¼ ï¼Œé€‚ç”¨äºåªæƒ³æ”¹<code>metadata</code></td><td>false</td></tr><tr><td>skip_screenshots</td><td>bool</td><td>è·³è¿‡æˆªå›¾ä¸Šä¼ ï¼Œå¦‚æœæˆªå›¾æ²¡æœ‰å˜åŒ–ï¼Œå¼€å¯è¿™é¡¹èŠ‚çº¦æ—¶é—´</td><td>false</td></tr><tr><td>skip_metadata</td><td>bool</td><td>è·³è¿‡å…ƒæ•°æ®ä¸Šä¼ </td><td>false</td></tr><tr><td>force</td><td>bool</td><td><code>deliver</code>ä¼šåœ¨ä¸Šä¼ æ—¶æ±‡æ€»ä¿¡æ¯ç”ŸæˆHTMLä¹Ÿï¼Œç­‰å¾…ä½ å®¡æ ¸ã€‚è·³è¿‡è¿™é¡¹å®¡æ ¸æ­¤é¡¹è®¾ä¸º<code>true</code></td><td>false</td></tr><tr><td>submit_for_review</td><td>bool</td><td>ä¸Šä¼ å®Œæˆæ˜¯å¦è‡ªåŠ¨æäº¤å®¡æ ¸</td><td>false</td></tr><tr><td>automatic_release</td><td>bool</td><td>å®¡æ ¸é€šè¿‡æ˜¯å¦è‡ªåŠ¨é‡Šæ”¾</td><td>false</td></tr><tr><td>price_tier</td><td>int</td><td>Appä»·æ ¼çº§åˆ«ã€‚<strong>æ³¨æ„ï¼šè¿™é¡¹æäº¤å½“æ—¶å°±ä¼šç”Ÿæ•ˆ</strong>ï¼Œæ‰€ä»¥æ›´æ”¹ä»·æ ¼è¿˜æ˜¯åœ¨åå¤©æ‰‹åŠ¨æ“ä½œ</td><td></td></tr><tr><td>submission_information</td><td>hash</td><td>è¿™æ˜¯åœ¨iTCä¸Šç‚¹å‡»æäº¤ä¹‹åçš„é—®ç­”è¡¨æ ¼ï¼Œ<a href="https://github.com/fastlane/fastlane/blob/master/spaceship/lib/spaceship/tunes/app_submission.rb#L18-L69" target="_blank" rel="noopener">å¯é€‰é¡¹</a></td><td></td></tr><tr><td>app_review_information</td><td>hash</td><td>æä¾›å®¡æ ¸æ—¶çš„ä¿¡æ¯ï¼Œ<a href="https://github.com/fastlane/fastlane/blob/master/deliver/Deliverfile.md#app_review_information" target="_blank" rel="noopener">è¯¦æƒ…</a></td><td></td></tr><tr><td>app_icon</td><td>string</td><td>æŒ‡å®š<code>icon</code>å›¾ç‰‡åœ°å€ï¼Œå¿…é¡»ä¸º<code>png</code>æ ¼å¼</td></tr></tbody></table><ul><li><p>submission_information =&gt;</p><ul><li><p>å‰ç¼€ <code>export_compliance</code> =&gt; å¯¹åº”ã€Œå‡ºå£åˆè§„ä¿¡æ¯ã€ï¼Œæ²¡æœ‰ç‰¹æ®Šæƒ…å†µéƒ½é€‰ <code>false</code> å°±å¯ä»¥ã€‚</p></li><li><p>å‰ç¼€ <code>content_rights</code> =&gt; é—®ä½ æ˜¯å¦åŒ…å«ï¼Œæ˜¾ç¤ºï¼Œè®¿é—®ç¬¬ä¸‰æ–¹å†…å®¹(è¿™é¡¹æˆ‘æ²¡åœ¨æˆ‘æäº¤è¿‡ç¨‹ä¸­æ‰¾åˆ°)ï¼Œæ²¡æœ‰ç‰¹æ®Šæƒ…å†µä¹Ÿéƒ½é€‰ <code>false</code> å°±å¯ä»¥ã€‚</p></li><li><p>å‰ç¼€ <code>add_id_info</code> =&gt; å¯å°±å…³é”®äº†ï¼Œå¯¹åº”ã€Œå¹¿å‘Šæ ‡è¯†ç¬¦ã€ï¼Œå¦‚æœä½ åœ¨ App ä¸­ä½¿ç”¨äº† <code>IDFA</code>ã€‚ä½ å¿…é¡»åœ¨è¿™ç»™ä¸ªç†ç”±ï¼Œè€Œä¸èƒ½ç›´æ¥é€‰ <code>false</code>ã€‚</p><p>ä¸‹å›¾ç­‰ä»·ä¸‹è¡¨ï¼ŒApp ä¸­æŠ•æ”¾äº†å¹¿å‘Šã€‚</p></li></ul></li></ul><p><img src="http://7xqhcq.com1.z0.glb.clouddn.com/fastlane/submission_information.png" alt=""></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">submission_information(&#123;</span><br><span class="line">  export_compliance_available_on_french_store: &quot;false&quot;,</span><br><span class="line">  export_compliance_contains_proprietary_cryptography: &quot;false&quot;,</span><br><span class="line">  export_compliance_contains_third_party_cryptography: &quot;false&quot;,</span><br><span class="line">  export_compliance_is_exempt: &quot;false&quot;,</span><br><span class="line">  export_compliance_uses_encryption: &quot;false&quot;,</span><br><span class="line">  export_compliance_app_type: nil,</span><br><span class="line">  export_compliance_encryption_updated: &quot;false&quot;,</span><br><span class="line">  export_compliance_compliance_required: &quot;false&quot;,</span><br><span class="line">  export_compliance_platform: &quot;ios&quot;,</span><br><span class="line">  content_rights_contains_third_party_content: &quot;false&quot;,</span><br><span class="line">  content_rights_has_rights: &quot;false&quot;,</span><br><span class="line">  add_id_info_limits_tracking: &quot;true&quot;,</span><br><span class="line">  add_id_info_serves_ads: &quot;true&quot;,</span><br><span class="line">  add_id_info_tracks_action: &quot;false&quot;,</span><br><span class="line">  add_id_info_tracks_install: &quot;false&quot;,</span><br><span class="line">  add_id_info_uses_idfa: &quot;true&quot;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>deliver</code> çš„ <code>CLI</code> å·¥å…·ï¼š</p><ul><li>ä¸‹è½½ iTC ä¸Šçš„æˆªå›¾ <code>deliver download_screenshots</code></li><li><p>ä¸‹è½½ iTC ä¸Šçš„å…ƒæ•°æ® <code>deliver download_metadata</code></p><p>é…ç½®å®Œä»¥ä¸Šçš„è®¾ç½®ï¼Œæœ€ååªéœ€è¦ä¸€æ¡å‘½ä»¤å‘å¸ƒ</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastlane ios deploy</span><br></pre></td></tr></table></figure><h2 id="ç³»ç»Ÿçº§-lane"><a href="#ç³»ç»Ÿçº§-lane" class="headerlink" title="ç³»ç»Ÿçº§ lane"></a>ç³»ç»Ÿçº§ lane</h2><p><code>fastlane</code> é»˜è®¤æœ‰ laneã€‚</p><ul><li><code>before_all</code>ï¼Œå°±æ˜¯åœ¨æ‰§è¡Œä¸€æ¬¡è„šæœ¬ä¹‹å‰é¦–å…ˆæ‰§è¡Œçš„ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œé¢æ‰§è¡Œä¸€äº›å…¬å…±çš„ä¸œè¥¿ï¼Œæ¯”å¦‚<code>git_pull</code>ï¼Œ<code>cocoapods</code>ã€‚</li></ul><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">before_all <span class="keyword">do</span></span><br><span class="line">  <span class="comment"># æ£€å‡ºåˆ° Developer åˆ†æ”¯</span></span><br><span class="line">  sh <span class="string">'git checkout Developer'</span></span><br><span class="line">  git_pull</span><br><span class="line">  cocoapods(<span class="symbol">repo_update:</span> <span class="literal">true</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><ul><li><p><code>after_all</code>ï¼Œ æˆåŠŸç»“æŸä¹‹åï¼Œå¤„ç†å…±æœ‰çš„åç½®é€»è¾‘ã€‚</p></li><li><p><code>before_each</code>ï¼Œæ¯æ¬¡æ‰§è¡Œ lane ä¹‹å‰éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</p></li><li><p><code>after_each</code>ï¼Œæ¯æ¬¡æ‰§è¡Œ lane ä¹‹åéƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</p></li><li><p><code>error</code>ï¼Œåœ¨æ‰§è¡Œä¸Šè¿°æƒ…å†µä»»æ„ç¯å¢ƒæŠ¥é”™éƒ½ä¼šä¸­æ­¢å¹¶æ‰§è¡Œä¸€æ¬¡ã€‚</p></li></ul><h3 id="æ‰§è¡Œé¡ºåº"><a href="#æ‰§è¡Œé¡ºåº" class="headerlink" title="æ‰§è¡Œé¡ºåº"></a>æ‰§è¡Œé¡ºåº</h3><table><thead><tr><th>æ‰§è¡Œé¡ºåº</th><th>æ–¹æ³•å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td>before_all</td><td>åœ¨æ‰§è¡Œ lane ä¹‹å‰åªæ‰§è¡Œä¸€æ¬¡ã€‚</td></tr><tr><td>2</td><td>before_each</td><td>æ¯æ¬¡æ‰§è¡Œ lane ä¹‹å‰éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</td></tr><tr><td>3</td><td>lane</td><td>è‡ªå®šä¹‰çš„ä»»åŠ¡ã€‚</td></tr><tr><td>4</td><td>after_each</td><td>æ¯æ¬¡æ‰§è¡Œ lane ä¹‹åéƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</td></tr><tr><td>5</td><td>after_all</td><td>åœ¨æ‰§è¡Œ lane æˆåŠŸç»“æŸä¹‹åæ‰§è¡Œä¸€æ¬¡ã€‚</td></tr><tr><td>6</td><td>error</td><td>åœ¨æ‰§è¡Œä¸Šè¿°æƒ…å†µä»»æ„ç¯å¢ƒæŠ¥é”™éƒ½ä¼šä¸­æ­¢å¹¶æ‰§è¡Œä¸€æ¬¡ã€‚</td></tr></tbody></table><h3 id="Error"><a href="#Error" class="headerlink" title="Error"></a>Error</h3><ul><li>å‡ºç° <code>Command timed out after 10 seconds on try 1 of 4, trying again...</code>ï¼Œåœ¨ <code>fastlane</code> æ–‡ä»¶å¼€å¤´åŠ ä¸Šï¼š</li></ul><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ENV[<span class="string">"FASTLANE_XCODEBUILD_SETTINGS_TIMEOUT"</span>] = <span class="string">"180"</span></span><br><span class="line">ENV[<span class="string">"FASTLANE_XCODE_LIST_TIMEOUT"</span>] = <span class="string">"180"</span></span><br></pre></td></tr></table></figure><h2 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h2><p>Fastlane çš„æ’ä»¶æ˜¯ä¸€ä¸ªæˆ–è€…ä¸€ç»„ <code>action</code> çš„æ‰“åŒ…ï¼Œå•ç‹¬å‘å¸ƒåœ¨ fastlane ä¹‹å¤–ã€‚<a href="https://github.com/fastlane/fastlane/blob/master/fastlane/docs/Plugins.md" target="_blank" rel="noopener">Fastlane Plugin æŒ‡å—</a></p><p>è‡ªä» 16 å¹´ 5 æœˆä»½æ¨å‡ºæ’ä»¶ç³»ç»Ÿä»¥æ¥ï¼Œç°åœ¨å·²ç»æœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹çš„æ’ä»¶å¯ä»¥ä½¿ç”¨ã€‚æŸ¥çœ‹æ‰€æœ‰æ’ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastlane search_plugins</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä»‹ç»ä¸¤ä¸ªä¸‹æ–‡ä¼šç”¨åˆ°çš„æ’ä»¶ï¼š</p><ol><li><p>fastlane-plugin-versioning =&gt; ç”¨æ¥ä¿®æ”¹ build ç‰ˆæœ¬å·å’Œ version ç‰ˆæœ¬å·ã€‚</p><p>Fastlane å†…åµŒçš„ action <code>increment_build_number</code>ä½¿ç”¨çš„æ˜¯è‹¹æœæä¾›çš„ <code>agvtool</code>ï¼Œ<code>agvtool</code> åœ¨æ›´æ”¹ Build çš„æ—¶å€™ä¼šæ”¹å˜æ‰€æœ‰targetçš„ç‰ˆæœ¬å·ã€‚è¿™æ—¶å¦‚æœä½ åœ¨ä¸€ä¸ªå·¥ç¨‹é‡Œæœ‰å¤šä¸ªäº§å“çš„è¯ï¼Œæ¯æ¬¡ç¼–è¯‘ï¼Œæ‰€æœ‰çš„Buildéƒ½è¦åŠ 1ï¼Œæœ€åå°±ä¸çŸ¥é“é«˜åˆ°å“ªé‡Œå»äº†ã€‚</p><p>æœ‰äº† <code>fastlane-plugin-versioning</code> ä¸ä»…å¯ä»¥æŒ‡å®š target å¢åŠ  Buildï¼Œè€Œä¸”å¯ä»¥æŒ‰ç…§ã€Œ<a href="http://semver.org/lang/zh-CN/" target="_blank" rel="noopener">è¯­ä¹‰åŒ–ç‰ˆæœ¬</a>ã€è§„èŒƒå¢åŠ  Versionï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥è®¾å®š Versionã€‚</p><p>PSï¼šæœ€å¼€å§‹å†™ iOS æ—¶ä¸çŸ¥é“æ€ä¹ˆå®šä¹‰ Buildã€‚ç°åœ¨æˆ‘ä¸€èˆ¬éƒ½ç›´æ¥å®šä¹‰æˆçº¯æ•°å­—ï¼Œæ¯”å¦‚ 100 èµ·,æ¯æ¬¡ç¼–è¯‘çš„æ—¶å€™è®©ä»–è‡ªåŠ¨åŠ ä¸€ã€‚</p></li><li><p><a href="https://github.com/whlsxl/firim/tree/master/fastlane-plugin-firim" target="_blank" rel="noopener">fastlane-plugin-firim</a> =&gt; ç›´æ¥æŠŠ AdHoc æˆ–è€… InHouse æ‰“åŒ…çš„ ipa ä¸Šä¼ åˆ° fir.imï¼Œä¾›æµ‹è¯•ä¸‹è½½ã€‚</p></li></ol><p>å®‰è£…ä¸Šé¢çš„æ’ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fastlane add_plugin [name] # å®‰è£…æ–¹æ³•</span><br><span class="line">fastlane add_plugin versioning</span><br><span class="line">fastlane add_plugin firim</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><p><a href="https://juejin.im/post/5a7b10bb6fb9a0636263bfd5" target="_blank" rel="noopener">iOS æŒç»­äº¤ä»˜ä¹‹ Fastlane</a></p><p><a href="http://devhy.com/2018/01/23/26-fastlane-usage/" target="_blank" rel="noopener">å’Œé‡å¤åŠ³åŠ¨è¯´å†è§-ä½¿ç”¨fastlaneè¿›è¡ŒiOSæ‰“åŒ…</a></p><p><a href="https://whlsxl.github.io/fastlane1/" target="_blank" rel="noopener">å°å›¢é˜Ÿçš„è‡ªåŠ¨åŒ–å‘å¸ƒï¼Fastlaneå¸¦æ¥çš„å…¨è‡ªåŠ¨åŒ–å‘å¸ƒ</a></p></div><footer class="article-footer"> <a data-url="https://blog.yuhanle.com/2018/08/06/fastlane-say-here/" data-id="cjlq7d4xz000uoz28s2ybwz1v" class="article-share-link" data-share="baidu" data-title="ä½¿ç”¨ fastlane è¿›è¡Œ iOS æ‰“åŒ…">åˆ†äº«åˆ°</a> <a href="https://blog.yuhanle.com/2018/08/06/fastlane-say-here/#disqus_thread" class="article-comment-link">è¯„è®º</a><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/fastlane/">fastlane</a></li></ul></footer></div><nav id="article-nav"> <a href="/2018/07/16/dream-late-code-nostop/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong><div class="article-nav-title">æ¢¦æƒ³è™½æ™šï¼Œâ€œç â€ä¸åœè¹„</div></a></nav></article><section id="comments"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></section></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title">è¿‘æœŸæ–‡ç« </h3><div class="widget"><ul><li> <a href="/2018/08/06/fastlane-say-here/">ä½¿ç”¨ fastlane è¿›è¡Œ iOS æ‰“åŒ…</a></li><li> <a href="/2018/07/16/dream-late-code-nostop/">æ¢¦æƒ³è™½æ™šï¼Œâ€œç â€ä¸åœè¹„</a></li><li> <a href="/2018/07/05/json-analysis-in-swift/">æ•°æ®åºåˆ—åŒ–æ¡†æ¶åœ¨ Swift æ—¥å¸¸å¼€å‘ä¸­çš„åº”ç”¨</a></li><li> <a href="/2018/05/13/rac-in-mvvm/">RAC åœ¨ MVVM ä¸­çš„å¸¸è§ç”¨æ³•</a></li><li> <a href="/2018/04/24/line-of-sight-in-code/">ä»£ç ä¸­çš„ç¼©è¿›çº¿</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">æ ‡ç­¾äº‘</h3><div class="widget tagcloud"> <a href="/tags/Flutter/" style="font-size:10px">Flutter</a> <a href="/tags/GCD/" style="font-size:12.5px">GCD</a> <a href="/tags/Go/" style="font-size:15px">Go</a> <a href="/tags/HandyJSON/" style="font-size:10px">HandyJSON</a> <a href="/tags/JSON/" style="font-size:10px">JSON</a> <a href="/tags/Quality/" style="font-size:10px">Quality</a> <a href="/tags/Sonar/" style="font-size:10px">Sonar</a> <a href="/tags/Translate/" style="font-size:15px">Translate</a> <a href="/tags/UI-Test/" style="font-size:10px">UI Test</a> <a href="/tags/WDA/" style="font-size:10px">WDA</a> <a href="/tags/fastlane/" style="font-size:10px">fastlane</a> <a href="/tags/iOS/" style="font-size:20px">iOS</a> <a href="/tags/motion/" style="font-size:10px">motion</a> <a href="/tags/outu/" style="font-size:15px">outu</a> <a href="/tags/poem/" style="font-size:10px">poem</a> <a href="/tags/prose/" style="font-size:10px">prose</a> <a href="/tags/rac/" style="font-size:10px">rac</a> <a href="/tags/scan/" style="font-size:10px">scan</a> <a href="/tags/see-a-word/" style="font-size:10px">see a word</a> <a href="/tags/swift/" style="font-size:10px">swift</a> <a href="/tags/think/" style="font-size:17.5px">think</a> <a href="/tags/tips/" style="font-size:15px">tips</a> <a href="/tags/æ™šç /" style="font-size:10px">æ™šç </a></div></div><div class="widget-wrap"><h3 class="widget-title">å‹æƒ…é“¾æ¥</h3><div class="widget"><ul><li> <a href="https://wanmac.yuhanle.com/" target="_blank">å°è®ºå›</a></li><li> <a href="https://birds.yuhanle.com/" target="_blank">ä»¿å£°é¸Ÿ</a></li><li> <a href="https://tolife.yuhanle.com/" target="_blank">è‡´ç®€ç”Ÿæ´»</a></li><li> <a href="https://latehorse.github.io/" target="_blank">æ™šç å·¥ä½œå®¤</a></li></ul></div></div></aside></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner"> &copy; 2014 - 2018 ç…œå¯’äº†<br> Powered by <a href="//hexo.io/" target="_blank">Hexo</a> . Hosted by <a href="https://pages.coding.me/" target="_blank">Coding Pages</a> & <a href="https://pages.github.com/">GitHub Pages</a></div></div></footer></div><nav id="mobile-nav"> <a href="/" class="mobile-nav-link">ä¸»é¡µ</a> <a href="/archives" class="mobile-nav-link">å½’æ¡£</a> <a href="/books" class="mobile-nav-link">ä¹¦å•</a> <a href="https://trello.com/b/Dy1OldrS/yuhanles-time" class="mobile-nav-link">è¡Œç¨‹</a> <a href="/links" class="mobile-nav-link">å‹é“¾</a> <a href="/about" class="mobile-nav-link">å…³äº</a></nav><div id="totop"> <a title="è¿”å›é¡¶éƒ¨"><img src="/img/scrollup.png"></a></div><script>var disqus_shortname="meetus",disqus_url="https://blog.yuhanle.com/2018/08/06/fastlane-say-here/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><div id="article-share-box" class="article-share-box"><div id="bdshare" class="bdsharebuttonbox article-share-links"><a class="article-share-weibo" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš"></a><a class="article-share-weixin" data-cmd="weixin" title="åˆ†äº«åˆ°å¾®ä¿¡"></a><a class="article-share-qq" data-cmd="sqq" title="åˆ†äº«åˆ°QQ"></a><a class="article-share-renren" data-cmd="renren" title="åˆ†äº«åˆ°äººäººç½‘"></a><a class="article-share-more" data-cmd="more" title="æ›´å¤š"></a></div></div><script>function SetShareData(e,a){return shareDataTitle&&shareDataUrl&&(a.bdText=shareDataTitle,a.bdUrl=shareDataUrl),a}with(window._bd_share_config={common:{onBeforeClick:SetShareData},share:{bdCustomStyle:"/css/bdshare.css"}},document)(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="//bdimg.share.baidu.com/static/api/js/share.js?cdnversion="+~(-new Date/36e5)</script><script src="https://cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script><script type="text/javascript">"undefined"==typeof jQuery&&document.write(unescape("%3Cscript src='/js/jquery-2.1.4.min.js' type='text/javascript'%3E%3C/script%3E"))</script><link rel="stylesheet" href="/fancybox/jquery.fancybox.css"><script src="/fancybox/jquery.fancybox.pack.js"></script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
                processEscapes: true
                    
}
  
        });
</script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
                  
}
    
        });
</script><script type="text/x-mathjax-config">
MathJax.Hub.Queue(function() {
            var all = MathJax.Hub.getAllJax(), i;
            for(i=0; i < all.length; i += 1) {
                            all[i].SourceElement().parentNode.className += ' has-jax';
                                    
            }
                
        });
</script><script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src="/js/script.js"></script></div></body></html>