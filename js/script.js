!function(l){var t=l("#totop");l(window).scroll(function(){1e3<l(document).scrollTop()?l(t).stop().fadeTo(300,1):l(t).stop().fadeTo(300,0)}),l(t).click(function(){return l("html, body").animate({scrollTop:0},500),!1});var a=l("#search-form-wrap"),e=!1,o=function(){e=!0},n=function(t){setTimeout(function(){e=!1,t&&t()},200)};l("#nav-search-btn").on("click",function(){e||(o(),a.addClass("on"),n(function(){l(".search-form-input").focus()}))}),l(".search-form-input").on("blur",function(){o(),a.removeClass("on"),n()}),l("body").on("click",function(){l(".article-share-box.on").removeClass("on")}).on("click",".article-share-link",function(t){t.stopPropagation();var a=l(this),e=a.attr("data-share"),o=a.offset();if("baidu"==e){var n=l("#article-share-box");if(shareDataUrl=a.attr("data-url"),shareDataTitle=a.attr("data-title"),n.hasClass("on"))return void n.removeClass("on");l(".article-share-box.on").hide(),n.css({top:o.top+25,left:o.left-25}).addClass("on")}else{var i=a.attr("data-url"),r=encodeURIComponent(i),s="article-share-box-"+a.attr("data-id");if(l("#"+s).length){if((n=l("#"+s)).hasClass("on"))return void n.removeClass("on")}else{var c=['<div id="'+s+'" class="article-share-box">','<input class="article-share-input" value="'+i+'">','<div class="article-share-links">','<a href="https://twitter.com/intent/tweet?url='+r+'" class="article-share-twitter" target="_blank" title="Twitter"></a>','<a href="https://www.facebook.com/sharer.php?u='+r+'" class="article-share-facebook" target="_blank" title="Facebook"></a>','<a href="http://pinterest.com/pin/create/button/?url='+r+'" class="article-share-pinterest" target="_blank" title="Pinterest"></a>','<a href="https://plus.google.com/share?url='+r+'" class="article-share-google" target="_blank" title="Google+"></a>',"</div>","</div>"].join("");n=l(c);l("body").append(n)}l(".article-share-box.on").hide(),n.css({top:o.top+25,left:o.left}).addClass("on")}}).on("click",".article-share-box",function(t){t.stopPropagation()}).on("click",".article-share-box-input",function(){l(this).select()}).on("click",".article-share-box-link",function(t){t.preventDefault(),t.stopPropagation(),window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")}),l(".article-entry").each(function(t){l(this).find("img").each(function(){if(!l(this).parent().hasClass("fancybox")){var t=this.alt;t&&l(this).after('<span class="caption">'+t+"</span>"),l(this).wrap('<a href="'+this.src+'" title="'+t+'" class="fancybox"></a>')}}),l(this).find(".fancybox").each(function(){l(this).attr("rel","article"+t)})}),l.fancybox&&l(".fancybox").fancybox();var i=l("#container"),r=!1;l("#main-nav-toggle").on("click",function(){r||(r=!0,i.toggleClass("mobile-nav-on"),setTimeout(function(){r=!1},200))}),l("#wrap").on("click",function(){!r&&i.hasClass("mobile-nav-on")&&i.removeClass("mobile-nav-on")})}(jQuery);